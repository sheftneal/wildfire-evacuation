library(sf)
library(sp)
library(tidyverse)
library(rgdal)
source("script/packages_and_functions.R")
mendo <- st_read("data/evacuation-zone-boundaries/Mendocino County Alert and Warning Map.kml")
dim(mendo)
mendo <- st_read("data/evacuation-zone-boundaries/Mendocino County Alert and Warning Map.kml", layer ="Evacuation Zones")
mendo <- st_read("data/evacuation-zone-boundaries/Mendocino County Alert and Warning Map.kml", layer ="map")
mendo <- st_read("data/evacuation-zone-boundaries/Mendocino County Alert and Warning Map.kml", layer =1)
source("script/packages_and_functions.R")
wf <- st_read(dsn = "data/fires/fire20_1.gdb", layer = "firep20_1") %>%
st_transform(crs = st_crs(ca)) %>%
mutate(
start_year = year(ALARM_DATE),
end_year = year(CONT_DATE),
start_day = date(ALARM_DATE),
end_day = date(CONT_DATE),
duration = (difftime(end_day,start_day, units = "days"))
)
wf <- st_read(dsn = "data/fires/fire20_1.gdb", layer = "firep20_1")
head(wf)
wf$ALARM_DATE[1]
wf %>% filter(STATE=="AZ")
wf %>% filter(STATE=="OR")
wf %>% filter(STATE=="UT")
wf %>% filter(STATE=="NV")
table(wf$STATE)
ca <- tigris::counties() %>% dplyr::filter(STATEFP=="06")
wf <- st_read(dsn = "fire20_1.gdb", layer = "firep20_1") %>%
st_transform(crs = st_crs(ca)) %>%
mutate(
start_year = year(ALARM_DATE),
end_year = year(CONT_DATE),
start_day = date(ALARM_DATE),
end_day = date(CONT_DATE),
duration = (difftime(end_day,start_day, units = "days"))
)
wf <- st_read(dsn = "data/fires/fire20_1.gdb", layer = "firep20_1") %>%
st_transform(crs = st_crs(ca)) %>%
mutate(
start_year = year(ALARM_DATE),
end_year = year(CONT_DATE),
start_day = date(ALARM_DATE),
end_day = date(CONT_DATE),
duration = (difftime(end_day,start_day, units = "days"))
)
library(lubridate)
wf <- st_read(dsn = "data/fires/fire20_1.gdb", layer = "firep20_1") %>%
st_transform(crs = st_crs(ca)) %>%
mutate(
start_year = year(ALARM_DATE),
end_year = year(CONT_DATE),
start_day = date(ALARM_DATE),
end_day = date(CONT_DATE),
duration = (difftime(end_day,start_day, units = "days"))
)
plot(st_geometry(wf[wf$STATE!="CA",]))
plot(st_geometry(ca),add=T, border = NA, col = 'green')
unique(wf$ALARM_DATE)
wf <- wf %>% filter(year==2020)
head(wf)
wf <- wf %>% filter(end_year==2020)
head(wf)
head(wf$ALARM_DATE)
table(wf$STATE)
wf <- st_read(dsn = "data/fires/fire20_1.gdb", layer = "firep20_1") %>%
st_transform(crs = st_crs(ca)) %>%
mutate(
start_year = year(ALARM_DATE),
end_year = year(CONT_DATE),
start_day = date(ALARM_DATE),
end_day = date(CONT_DATE),
duration = (difftime(end_day,start_day, units = "days"))
)
wf %>% filter(STATE!='CA')
wf %>% filter(STATE!='CA') %>% as.data.frame()
wf %>% filter(STATE!='CA') %>% dplyr::select(start_year)
table(wf$start_year[wf$STATE!="CA"])
.08*1e6
